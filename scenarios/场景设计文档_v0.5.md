# AI Project Management Platform - 场景设计文档 v0.5

> **版本说明**：加入OpenClaw Skill使用场景，简化参与者AI调用

---

## 场景一：参与者配置Skill

### 场景描述
李四是一个后端开发者，他配置OpenClaw Skill以便参与项目。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：配置Skill                                                      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ Skill配置页面：                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ OpenClaw Skill - AI Project Worker                                   │   │
│ │                                                                    │   │
│ │ API供应商配置：                                                     │   │
│ │ ┌────────────────────────────────────────────────────────────────┐ │   │
│ │ │ [x] Anthropic (Claude)                                       │ │   │
│ │ │ [ ] OpenAI (GPT-4)                                           │ │   │
│ │ │ [ ] DeepSeek (DeepSeek Chat)                                 │ │   │
│ │ │ [ ] 阿里云 (通义千问)                                         │ │   │
│ │ └────────────────────────────────────────────────────────────────┘ │   │
│ │                                                                    │   │
│ │ API Key配置：                                                      │   │
│ │ ┌────────────────────────────────────────────────────────────────┐ │   │
│ │ │ sk-ant-xxxxxxxxxxxxxxxxxxxxx                                 │ │   │
│ │ │ [测试连接]                                                    │ │   │
│ │ └────────────────────────────────────────────────────────────────┘ │   │
│ │                                                                    │   │
│ │ 模型选择：                                                         │   │
│ │ ┌────────────────────────────────────────────────────────────────┐ │   │
│ │ │ ○ Claude Sonnet 4 (默认)                                    │ │   │
│ │ │ ○ Claude Sonnet 4-20250514                                   │ │   │
│ │ │ ○ GPT-4o                                                    │ │   │
│ │ │ ○ GPT-4o-mini                                               │ │   │
│ │ │ ○ DeepSeek Chat                                             │ │   │
│ │ └────────────────────────────────────────────────────────────────┘ │   │
│ │                                                                    │   │
│ │ [保存配置]  [取消]                                               │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 2：测试连接                                                      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 测试结果：                                                             │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ ✅ 连接成功                                                         │   │
│ │                                                                    │   │
│ │ 模型信息：                                                         │   │
│ │ ├─ 模型：Claude Sonnet 4                                        │   │
│ │ ├─ 上下文：200K tokens                                          │   │
│ │ └─ 价格：¥0.003/1K tokens                                      │   │
│ │                                                                    │   │
│ │ 配额信息：                                                         │   │
│ │ ├─ 本月已用：¥12.50                                            │   │
│ │ ├─ 限制：¥500/月                                               │   │
│ │ └─ 剩余：¥487.50                                               │   │
│ │                                                                    │   │
│ │ [完成配置]  [查看使用记录]                                      │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 3：查看成本监控                                                   │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 成本统计：                                                             │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 今日成本：¥0.85                                                    │   │
│ │                                                                    │   │
│ │ 本周成本：¥3.20                                                   │   │
│ │ 本月成本：¥12.50 / ¥500 限制                                   │   │
│ │                                                                    │   │
│ │ 使用记录：                                                         │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 时间       │ 模型        │ Tokens │ 成本    │ 任务        │  │   │
│ │ ├───────────┼─────────────┼────────┼─────────┼──────────────┤  │   │
│ │ │ 10:30    │ Claude     │ 15K   │ ¥0.045  │ API开发      │  │   │
│ │ │ 11:15    │ Claude     │ 22K   │ ¥0.066  │ Bug修复      │  │   │
│ │ │ 14:00    │ Claude     │ 18K   │ ¥0.054  │ 文档编写    │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                    │   │
│ │ [查看详情]  [调整配额]  [切换模型]                              │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 场景二：参与者使用Skill完成任务

### 场景描述
李四认领环节后，使用Skill调用Claude完成代码开发任务。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：使用Skill执行任务                                              │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ Skill任务执行：                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 任务：环节1 - 后端API开发                                           │   │
│ │ 描述：开发用户认证RESTful API                                      │   │
│ │                                                                    │   │
│ │ 执行方式：                                                         │   │
│ │ ┌────────────────────────────────────────────────────────────────┐ │   │
│ │ │ 🤖 使用Skill调用AI                                           │ │   │
│ │ └────────────────────────────────────────────────────────────────┘ │   │
│ │                                                                    │   │
│ │ AI提示词：                                                         │   │
│ │ ┌────────────────────────────────────────────────────────────────┐ │   │
│ │ │ 请开发一个用户认证RESTful API，包含以下功能：                    │ │   │
│ │ │ 1. 用户注册                                                   │ │   │
│ │ │ 2. 用户登录 (JWT)                                             │ │   │
│ │ │ 3. 密码重置                                                   │ │   │
│ │ │ 4. Token刷新                                                  │ │   │
│ │ │                                                                    │ │   │
│ │ │ 要求：                                                         │ │   │
│ │ │ - 使用Python + FastAPI                                        │ │   │
│ │ │ - 使用SQLAlchemy进行数据库操作                                  │ │   │
│ │ │ - 包含完整的单元测试                                           │ │   │
│ │ │ - 符合PEP8规范                                                │ │   │
│ │ └────────────────────────────────────────────────────────────────┘ │   │
│ │                                                                    │   │
│ │ [执行]  [预览提示词]  [保存草稿]                               │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 2：AI执行并生成结果                                              │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ AI执行结果：                                                           │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ ✅ 执行完成                                                         │   │
│ │                                                                    │   │
│ │ 消耗：                                                             │   │
│ │ ├─ Tokens：22,500                                                │   │
│ │ ├─ 模型：Claude Sonnet 4                                         │   │
│ │ └─ 成本：¥0.0675                                                │   │
│ │                                                                    │   │
│ │ 生成文件：                                                         │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 📄 app.py (3.2KB) - FastAPI主应用                          │  │   │
│ │ │ 📄 models.py (1.8KB) - SQLAlchemy模型                     │  │   │
│ │ │ 📄 schemas.py (1.2KB) - Pydantic模式                      │  │   │
│ │ │ 📄 auth.py (2.5KB) - 认证逻辑                             │  │   │
│ │ │ 📄 main.py (0.8KB) - 应用入口                            │  │   │
│ │ │ 📄 test_auth.py (2.1KB) - 单元测试                       │  │   │
│ │ │ 📄 requirements.txt (0.2KB) - 依赖列表                     │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                    │   │
│ │ [查看代码]  [复制代码]  [提交到Git]  [调整重试]             │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 3：提交成果                                                      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 提交成果：                                                            │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 提交到GitHub仓库：                                                  │   │
│ │ https://github.com/li4/user-auth-api                           │   │
│ │                                                                    │   │
│ │ 本次贡献：                                                         │   │
│ │ ├─ 代码提交：8次                                                  │   │
│ │ ├─ 代码行数：+850 / -20                                         │   │
│ │ └─ 测试用例：15个                                                 │   │
│ │                                                                    │   │
│ │ AI使用记录：                                                       │   │
│ │ ├─ 调用次数：3次                                                 │   │
│ │ ├─ 消耗Tokens：52,500                                            │   │
│ │ └─ 成本：¥0.1575                                                 │   │
│ │                                                                    │   │
│ │ [确认提交]                                                         │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 场景三：使用Skill进行代码审查

### 场景描述
参与者使用Skill的代码审查功能审查代码质量。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：发起代码审查                                                  │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 代码审查：                                                             │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 审查目标：                                                          │   │
│ │ ┌────────────────────────────────────────────────────────────────┐ │   │
│ │ │ GitHub仓库：https://github.com/li4/user-auth-api          │ │   │
│ │ │ 分支：feature/auth-module                                    │ │   │
│ │ │ PR：#12                                                     │ │   │
│ │ └────────────────────────────────────────────────────────────────┘ │   │
│ │                                                                    │   │
│ │ 审查类型：                                                         │   │
│ │ ┌────────────────────────────────────────────────────────────────┐ │   │
│ │ │ [x] 完整代码审查                                              │ │   │
│ │ │ [ ] 安全性审查                                                │ │   │
│ │ │ [ ] 性能审查                                                  │ │   │
│ │ │ [ ] 规范审查                                                  │ │   │
│ │ │ [ ] Bug检测                                                  │ │   │
│ │ └────────────────────────────────────────────────────────────────┘ │   │
│ │                                                                    │   │
│ │ [开始审查]                                                         │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 2：审查结果                                                      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 审查报告：                                                             │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ ✅ 审查完成 - 耗时 45秒                                           │   │
│ │                                                                    │   │
│ │ 审查摘要：                                                         │   │
│ │ ├─ 文件数：6个                                                   │   │
│ │ ├─ 代码行数：850                                                 │   │
│ │ ├─ 发现问题：3个                                                 │   │
│ │ └─ 建议：5条                                                    │   │
│ │                                                                    │   │
│ │ 问题详情：                                                         │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 🔴 严重问题：1个                                            │  │   │
│ │ │ [auth.py:45] 使用明文存储密码，建议使用hash                │  │   │
│ │ ├─────────────────────────────────────────────────────────────┤  │   │
│ │ │ 🟡 警告：1个                                               │  │   │
│ │ │ [models.py:23] 缺少数据库索引                              │  │   │
│ │ ├─────────────────────────────────────────────────────────────┤  │   │
│ │ │ 🟢 建议：5条                                               │  │   │
│ │ │ [app.py:12] 建议添加请求日志                               │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                    │   │
│ │ 消耗：¥0.025 (8,500 tokens)                                   │   │
│ │                                                                    │   │
│ │ [查看详情]  [生成修复PR]  [导出报告]                           │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 场景四：Skill成本管理

### 场景描述
参与者查看和控制自己的API使用成本。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：成本概览                                                      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 成本看板：                                                             │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 💰 成本统计                                                        │   │
│ │                                                                    │   │
│ │ 本日：¥0.85                                                       │   │
│ │ 本周：¥3.20                                                       │   │
│ │ 本月：¥12.50 / ¥500 限制 (2.5%)                              │   │
│ │                                                                    │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 📈 Claude Sonnet 4: ¥10.00 (80%)                         │  │   │
│ │ │ 📉 GPT-4o: ¥2.50 (20%)                                   │  │   │
│ │ │ 💤 DeepSeek: ¥0.00 (0%)                                  │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                    │   │
│ │ ⚠️ 提醒：Claude接近月度限制(80%)                               │   │
│ │                                                                    │   │
│ │ [查看详情]  [调整配额]  [切换模型]  [设置预算]                │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 2：使用记录                                                      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 使用记录：                                                             │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 📊 使用记录                                                         │   │
│ │                                                                    │   │
│ │ 今日：                                                              │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 时间       │ 任务        │ Tokens │ 成本    │ 模型       │  │   │
│ │ ├───────────┼─────────────┼────────┼─────────┼───────────┤  │   │
│ │ │ 10:30    │ API开发     │ 15K   │ ¥0.045  │ Claude     │  │   │
│ │ │ 11:15    │ Bug修复     │ 8K    │ ¥0.024  │ Claude     │  │   │
│ │ │ 14:00    │ 代码审查    │ 5K    │ ¥0.015  │ GPT-4o    │  │   │
│ │ │ 15:30    │ 文档编写    │ 12K   │ ¥0.036  │ Claude     │  │   │
│ │ │ 16:00    │ API开发     │ 18K   │ ¥0.054  │ Claude     │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                    │   │
│ │ 💡 优化建议：                                                       │   │
│ │ ├─ 使用GPT-4o-mini替代Claude进行简单任务，可节省40%             │   │
│ │ ├─ 当前Claude使用占比80%，可适当平衡                           │   │
│ │ └─ 本月剩余配额 ¥487.50，预计可用20天                          │   │
│ │                                                                    │   │
│ │ [导出记录]  [设置预算提醒]  [配置优化]                         │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 场景五：参与者在线状态管理

### 场景描述
参与者主动维护自己的在线状态，发起人可查看参与者状态并指定备用参与者。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：参与者标记在线状态                                              │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 参与者状态切换：                                                        │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 当前状态：[🟢 在线 ▼]                                               │   │
│ │                                                                    │   │
│ │ 状态选项：                                                         │   │
│ │ ├─ 🟢 在线 - 可接新任务                                          │   │
│ │ ├─ 🟡 忙碌 - 正在执行任务                                        │   │
│ │ └─ 🔴 离线 - 暂时不接任务                                       │   │
│ │                                                                    │   │
│ │ 最近活跃：刚刚                                                    │   │
│ │ [切换状态]                                                        │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│ 系统自动切换：                                                          │
│ └─────────────────────────────────────────────────────────────────────┐   │
│ │ 状态变化提醒                                                        │   │
│ │                                                                    │   │
│ │ ✅ 李四开始执行任务，自动切换为【🟡 忙碌】                     │   │
│ │                                                                    │   │
│ │ ⏰ 李四已24小时无操作，自动切换为【🔴 离线】                   │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 2：发起人查看参与者状态                                          │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 参与者状态看板：                                                       │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 👥 参与者状态看板                                               │   │
│ │                                                                    │   │
│ │ 🟢 在线 (3人)                                                   │   │
│ │ ├─ 李四 - 刚刚活跃 | 任务：1个 | 专长：Python, FastAPI      │   │
│ │ ├─ 王五 - 10分钟前 | 任务：2个 | 专长：React, TypeScript   │   │
│ │ └─ 赵六 - 30分钟前 | 任务：0个 | 专长：Node.js            │   │
│ │                                                                    │   │
│ │ 🟡 忙碌 (1人)                                                   │   │
│ │ └─ 周八 - 进行中 | 任务：1个 | 专长：Go, Docker           │   │
│ │                                                                    │   │
│ │ 🔴 离线 (2人)                                                   │   │
│ │ ├─ 吴九 - 2小时前 | 任务：0个 | 专长：Rust              │   │
│ │ └─ 郑十 - 1天前 | 任务：0个 | 专长：Python             │   │
│ │                                                                    │   │
│ │ [查看详情]  [发起人邀请]                                          │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 3：发起人指定备用参与者                                         │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 指定备用参与者：                                                       │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 环节1：后端API开发                                               │   │
│ │ 负责人：李四 (🟡 忙碌)                                         │   │
│ │                                                                    │   │
│ │ 指定备用参与者：                                                   │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 候选列表：                                                     │  │   │
│ │ │ 🟢 王五 - 专长匹配 | 评分：4.8/5.0                      │  │   │
│ │ │ 🟢 赵六 - 专长匹配 | 评分：4.5/5.0                      │  │   │
│ │ │ 🔴 吴九 - 专长匹配 | 评分：4.6/5.0                      │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                    │   │
│ │ [添加备用]  [取消]                                              │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│ 备用列表：                                                            │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 已选备用：                                                         │   │
│ │ ├─ 王五 - 已确认备用 | 状态：🟢 在线                        │   │
│ │ └─ 赵六 - 待确认 | 状态：🟢 在线                            │   │
│ │                                                                    │   │
│ │ 💡 备用参与者可在主负责人失联时接管任务                          │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 场景六：企业模式使用

### 场景描述
发起人发布加密项目，参与者申请认领并获取密钥。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：发布加密项目                                                  │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 项目表单（加密设置）：                                                 │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 加密设置：                                                         │   │
│ │ ├─ [x] 开启加密                                                   │   │
│ │                                                                │   │
│ │ 需要加密的环节：                                                   │   │
│ │ ├─ [x] 环节1：后端API开发                                      │   │
│ │ ├─ [x] 环节2：前端界面开发                                      │   │
│ │ └─ [ ] 环节3：文档编写                                          │   │
│ │                                                                │   │
│ │ 需要加密的资料：                                                   │   │
│ │ ├─ [x] 项目描述                                                 │   │
│ │ ├─ [x] 环节详情                                                 │   │
│ │ ├─ [x] 代码仓库                                                 │   │
│ │ ├─ [x] 交付件                                                   │   │
│ │ └─ [x] 沟通记录                                                 │   │
│ │                                                                │   │
│ │ 密钥分发：[●手动确认后分发]                                     │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 2：参与者申请并获取密钥                                          │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 发起人确认并分发密钥：                                                │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 申请者：李四                                                         │   │
│ │ 环节：后端API开发（加密）                                          │   │
│ │ 评分：4.7/5.0                                                      │   │
│ │                                                                    │   │
│ │ [确认并分发密钥]  [拒绝]  [再看看]                              │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│ 密钥分发：                                                            │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ ✅ 密钥已生成（AES-256）                                          │   │
│ │                                                                │   │
│ │ 子密钥已安全发送给李四                                             │   │
│ │ 密钥ID：KEY-2026-0217-001-001                                 │   │
│ │ 有效时间：项目结束自动失效                                        │   │
│ │                                                                │   │
│ │ ⚠️ 请李四确认接收密钥                                             │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 3：参与者使用密钥                                                │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 李四接收并解密查看：                                                   │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 🔐 收到新密钥                                                      │   │
│ │                                                                │   │
│ │ 项目：AI代码审查工具                                               │   │
│ │ 环节：后端API开发                                                 │   │
│ │ 密钥ID：KEY-2026-0217-001-001                                 │   │
│ │                                                                │   │
│ │ [确认接收]  [查看密钥详情]                                      │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│ 李四解密查看环节详情：                                                 │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 🔓 已解密                                                          │   │
│ │                                                                │   │
│ │ 环节1：后端API开发（加密）                                         │   │
│ │ 描述：开发审查API，支持多语言                                     │   │
│ │ 需要成果：API文档 + 单元测试                                      │   │
│ │                                                                │   │
│ │ 💡 李四可以使用密钥解密查看所有加密内容                           │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 4：发起人管理密钥                                                │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 密钥管理面板：                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 🔑 密钥管理                                                        │   │
│ │                                                                │   │
│ │ 已分发密钥：                                                       │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 密钥ID              │ 参与者 │ 环节     │ 状态   │ 操作    │  │   │
│ │ ├────────────────────┼─────────┼──────────┼─────────┼────────┤  │   │
│ │ │ KEY-xxx-001       │ 李四    │ 环节1    │ 有效   │ [查看] │  │   │
│ │ │ KEY-xxx-002       │ 王五    │ 环节2    │ 有效   │ [查看] │  │   │
│ │ │ KEY-xxx-003       │ 赵六    │ 环节3    │ 有效   │ [查看] │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                │   │
│ │ 操作：                                                             │   │
│ │ ├─ [查看所有密钥]                                                │   │
│ │ ├─ [重新生成主密钥] ⚠️                                          │   │
│ │ └─ [导出密钥记录]                                                │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 场景七：备份接管与任务转移

### 场景描述
参与者放弃任务或失联时，备用参与者接管任务。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：参与者放弃任务                                                │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 放弃任务申请：                                                        │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 放弃任务：环节1 - 后端API开发                                    │   │
│ │ 放弃原因：                                                       │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ ○ 任务超出能力范围                                          │  │   │
│ │ │ ○ 个人原因无法继续                                          │  │   │
│ │ │ ○ 其他原因                                                  │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                    │   │
│ │ 备注：                                                          │   │
│ │ [任务复杂度超出预期，需要更多时间...]                            │   │
│ │                                                                    │   │
│ │ ⚠️ 放弃任务会影响信誉分                                        │   │
│ │                                                                    │   │
│ │ [确认放弃]  [取消]                                              │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 2：发起人处理放弃                                               │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 处理放弃请求：                                                        │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 放弃请求：李四放弃环节1                                          │   │
│ │ 原因：任务超出能力范围                                           │   │
│ │                                                                    │   │
│ │ 处理方式：                                                       │   │
│ │ ├─ ⏪ 重新开放认领                                            │   │
│ │ ├─ 👤 指定备用参与者接管                                        │   │
│ │ └─ 🔒 关闭环节                                                │   │
│ │                                                                    │   │
│ │ 💡 李四信誉分 -1 (从4.7降至4.6)                               │   │
│ │                                                                    │   │
│ │ [确认处理]  [取消]                                              │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 3：备用参与者接管                                               │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 备用接管通知：                                                        │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ 🔔 接管任务邀请                                                  │   │
│ │                                                                    │   │
│ │ 发起人张三邀请你接管任务：                                       │   │
│ │ 环节：后端API开发                                               │   │
│ │ 原负责人：李四 (已放弃)                                          │   │
│ │ 进度：60%                                                       │   │
│ │                                                                    │   │
│ │ 项目信息：                                                       │   │
│ │ ├─ 项目：AI代码审查工具                                         │   │
│ │ ├─ 已完成：API框架 + 认证模块                                  │   │
│ │ └─ 待完成：测试 + 文档                                         │   │
│ │                                                                    │   │
│ │ 💰 剩余预算：¥1,200                                           │   │
│ │                                                                    │   │
│ │ [确认接管]  [拒绝]                                              │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│ 接管后：                                                            │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ ✅ 已接管任务                                                    │   │
│ │                                                                    │   │
│ │ 王五成为环节1新负责人                                            │   │
│ │ 任务进度：60% → 同步中...                                      │   │
│ │                                                                    │   │
│ │ 💡 已获取项目密钥，可查看加密内容                               │   │
│ │                                                                    │   │
│ │ [查看任务详情]  [继续执行]                                      │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 场景七：分成结算

### 场景描述
项目完成后，按贡献度计算分成。

### 流程

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 步骤 1：项目完成                                                      │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│ 项目状态：                                                             │
│ ┌─────────────────────────────────────────────────────────────────────┐   │
│ │ ✅ 项目已完成                                                        │   │
│ │ 项目：AI代码审查工具                                               │   │
│ │ 完成时间：2026-02-17                                              │   │
│ │ 总积分：5000积分（企业模式）                                      │   │
│ │                                                                │   │
│ │ 参与者贡献：                                                      │   │
│ │ ┌─────────────────────────────────────────────────────────────┐  │   │
│ │ │ 参与者   │ 贡献度 │ 获得积分 │ 使用成本 │ 净收益          │  │   │
│ │ ├─────────┼────────┼──────────┼──────────┼────────────────┤  │   │
│ │ │ 李四     │ 35%   │ 1750    │ ¥0.47   │ ¥0 (已付)     │  │   │
│ │ │ 王五     │ 30%   │ 1500    │ ¥0.38   │ ¥0 (已付)     │  │   │
│ │ │ 赵六     │ 25%   │ 1250    │ ¥0.32   │ ¥0 (已付)     │  │   │
│ │ │ 发起人   │ 10%   │ 500     │ -       │ ¥0 (预留)     │  │   │
│ │ └─────────────────────────────────────────────────────────────┘  │   │
│ │                                                                │   │
│ │ 注：参与者自己承担API调用成本，平台不收取额外费用               │   │
│ └─────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

**文档版本**: v0.5
**更新日期**: 2026-02-17
**设计原则**：加入OpenClaw Skill使用场景，简化参与者AI调用
