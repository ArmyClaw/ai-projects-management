# AI Project Management Platform - 需求规格说明书 v0.7

> **版本说明**：基于v0.7需求设计的系统架构和技术选型  
> **核心原则**：优秀的人的经验以Skill方式用于项目各环节

---

## 一、核心定位

### 1.1 产品愿景

> "优秀的人的经验，以Skill方式，用于项目各环节——这是未来人机协作完成项目的方式"

### 1.2 核心理念

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     人机协作完成项目的核心逻辑                          │
│                                                                             │
│     项目要求                                                                  │
│         │                                                                     │
│         ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  步骤1：发起人发布项目                                     │   │
│  │       - 拆解任务                                               │   │
│  │       - 定义验收标准                                           │   │
│  │       - 设置预算                                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│         │                                                                     │
│         ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  步骤2：参与者认领任务                                       │   │
│  │       - 查看任务要求                                           │   │
│  │       - 评估验收标准                                           │   │
│  │       - 确认交付物                                             │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│         │                                                                     │
│         ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  步骤3：用Skill完成交付                                       │   │
│  │       - 参与者用自己的工具（Claude/Cursor等）                 │   │
│  │       - 加载Skill（自己的/社区的）                            │   │
│  │       - 按Skill的经验和质量标准完成交付                        │   │
│  │       - 提交GitHub PR                                         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│         │                                                                     │
│         ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  步骤4：发起人验收成果                                         │   │
│  │       - 检查交付物是否符合验收标准                               │   │
│  │       - 确认质量                                               │   │
│  │       - 通过 → 结算                                            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.3 核心原则

```
产品核心原则：
├─ 1. Skill是参与者的核心资产              → 经验封装，可复用
├─ 2. 参与者自由选择AI工具               → Claude/Cursor/Codex
├─ 3. 平台只验收成果，不关心过程         → 不看Token消耗
├─ 4. 发起人只看验收标准是否达标         → 不管用什么模型
├─ 5. Skill可集成到AI工具                → MCP Protocol
└─ 6. 社区可复用优秀Skill               → 经验沉淀和分享
```

### 1.4 两种使用方式

| 维度 | 社区模式 | 企业模式 |
|------|---------|---------|
| **发起** | 任何人可发起 | 内部成员可发起 |
| **参与** | 开放参与 | 内部成员参与 |
| **可见性** | 公开项目 | 私有项目 |
| **收益** | 现金分成 | 积分统计 |

---

## 二、社区共治

### 2.1 核心理念：没有权威，只有历史

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                   社区共治的核心逻辑                                    │
│                                                                             │
│  平台不做价值判断，只维护系统                                               │
│                                                                             │
│      经验提供者的信用                                                      │
│          │                                                                │
│          ▼                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  信用来源 = 历史记录总和                                            │   │
│  │       ├─ 被多少人采用                                              │   │
│  │       ├─ 帮多少人成了事                                            │   │
│  │       └─ 记录都在数据库里，谁都看得见，谁也改不了                 │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 平台角色转变

| 之前 | 现在 |
|------|------|
| 平台提供Skill市场（官方审核） | 平台只维护系统（记录所有行为） |
| 平台判定验收标准好坏 | 平台展示历史记录（让市场选择） |
| 平台计算参与者评分 | 平台记录历史数据（信用由历史写就） |
| 平台有最终判定权 | 平台只执行规则（社区举证） |

### 2.3 社区共治边界

```
社区共治 = 防止系统被破坏，不判断内容好坏

平台治理：
├─ 虚假交易？→ 社区举证 → 平台冻结
├─ 抄袭洗稿？→ 社区举证 → 平台封禁
├─ 恶意差评？→ 社区举证 → 平台惩罚
└─ 刷好评？→ 社区举证 → 平台封禁

平台不做：
├─ 不判定"这个Skill好不好"（让历史说话）
├─ 不审核"这个验收标准对不对"（让用户选择）
├─ 不决定"这个参与者评分多少"（让数据说话）
└─ 不做价值判断，只维护规则
```

### 2.4 信用体系设计

```
信用来源 = 历史记录总和

┌─────────────────────────────────────────────────────────────────────────────┐
│                         信用体系设计                                    │
│                                                                             │
│  1. Skill信用                                                              │
│     ├─ 被多少项目采用（采用数）                                         │   │
│     ├─ 验收通过率（成功率）                                             │   │
│     ├─ 发起人好评率                                                     │   │
│     └─ 信用 = 历史记录总和（链上可查）                                  │   │
│                                                                             │
│  2. 参与者信用                                                            │
│     ├─ 参与过多少项目（项目数）                                         │   │
│     ├─ 成功交付率（完成任务数/承接任务数）                              │   │
│     ├─ 发起人好评率                                                     │   │
│     └─ 信用 = 历史记录总和                                              │   │
│                                                                             │
│  3. 发起人信用                                                            │
│     ├─ 发布过多少项目（项目数）                                         │   │
│     ├─ 项目完成率（完成项目数/发布项目数）                             │   │
│     ├─ 参与者好评率                                                     │   │
│     └─ 信用 = 历史记录总和                                              │   │
│                                                                             │
│  4. 验收标准信用                                                          │
│     ├─ 被多少项目使用（使用数）                                         │   │
│     ├─ 验收通过率（使用该标准的项目通过率）                             │   │
│     └─ 信用 = 历史记录总和                                              │   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.5 社区治理机制

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       社区治理机制                                      │
│                                                                             │
│  1. 举证机制                                                              │
│     ├─ 任何人可以举证（提交证据）                                        │   │
│     ├─ 社区成员可以附议（支持/反对）                                    │   │
│     ├─ 达到阈值则平台执行                                                │   │
│     └─ 举证需押注积分（防止恶意举证）                                    │   │
│                                                                             │
│  2. 惩罚机制                                                              │
│     ├─ 虚假交易：冻结账户                                               │   │
│     ├─ 抄袭洗稿：封禁+公开记录                                          │   │
│     ├─ 恶意差评：扣除信用分                                             │   │
│     └─ 刷好评：封禁+公开记录                                            │   │
│                                                                             │
│  3. 申诉机制                                                              │
│     ├─ 被惩罚者可申诉                                                   │   │
│     ├─ 提交证据反驳                                                     │   │
│     └─ 社区投票决定                                                     │   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.6 历史记录不可篡改

```
记录原则：
├─ 所有行为都有记录
├─ 记录一旦写入不可修改
├─ 记录公开透明，谁都看得见
└─ 记录是信用唯一来源

记录内容：
├─ 项目创建记录
├─ 任务认领记录
├─ 成果提交记录
├─ 验收通过/拒绝记录
├─ 信用变更记录
└─ 惩罚记录

查询方式：
├─ 发起人可查参与者的历史记录
├─ 参与者可查发起人的历史记录
├─ 任何人可查Skill的历史记录
└─ 任何人可查验收标准的历史记录
```

### 2.7 信用算法的设计原则

```
信用算法：
├─ 长期行为权重更高（防止短期刷分）
├─ 成功案例权重更高（帮多少人成了事）
├─ 多维度综合评估（不只是数量）
└─ 透明可审计（算法开源）

具体设计：
├─ 时间衰减：越近的行为权重越高
├─ 成功溢价：完成项目的权重高于未完成
├─ 好评加成：好评增加信用，差评减少信用
├─ 惩罚倍增：一次作恶的代价远大于收益
└─ 多维度：数量、质量、好评率分开计算
```

---

## 三、Skill设计

### 2.1 Skill定义

```
Skill是什么：
├─ 是参与者的经验封装
├─ 包含：Prompt模板、工作流程、质量标准
├─ 可：复用、分享、集成到AI工具
└─ 用于：项目各环节

Skill不是什么：
├─ 不是平台提供的服务
├─ 不是调用API的封装
└─ 不是限制参与者工具
```

### 2.2 Skill核心组成

```typescript
interface Skill {
  // 基础信息
  id: string
  name: string              // Skill名称
  description: string       // 功能描述
  author: User             // 作者
  tags: string[]          // 标签：Python/React/API等
  
  // 核心组件
  promptTemplates: PromptTemplate[]  // Prompt模板集合
  workflow: Workflow                  // 工作流程定义
  qualityStandard: QualityStandard  // 质量标准
  
  // 元数据
  visibility: 'private' | 'community' | 'public'
  license: string        // 开源许可证
  
  // 统计
  stats: {
    usageCount: number      // 使用次数
    successRate: number     // 验收通过率
    avgQualityScore: number // 平均质量分
  }
}
```

### 2.3 Skill使用方式

```
参与者使用Skill的两种方式：

方式1：创建自己的Skill
├─ 参与者创建Skill
├─ 积累经验形成模板
└─ 用于自己的项目

方式2：复用社区Skill
├─ 查看社区Skill
├─ 导入到本地
└─ 用于自己的任务

方式3：集成到AI工具
├─ 导出为MCP格式
├─ 加载到Claude/Cursor
└─ 在AI工具中使用
```

### 2.4 Skill示例

```
示例：Python RESTful API 开发Skill

Skill结构：
├─ 名称：Python RESTful API 开发专家
├─ 标签：[Python, FastAPI, RESTful, API Design]
├─ Prompt模板：
│  ├─ 基础模板：通用API开发Prompt
│  ├─ 数据库集成：SQLAlchemy集成模板
│  ├─ 认证模块：JWT认证模板
│  └─ 测试模板：pytest模板
├─ 工作流程：
│  ├─ 步骤1：分析API需求
│  ├─ 步骤2：设计数据模型
│  ├─ 步骤3：编写API代码
│  └─ 步骤4：编写测试用例
└─ 质量标准：
   ├─ PEP8规范
   ├─ 单元测试覆盖率 > 80%
   ├─ 错误处理完整
   └─ 文档齐全
```

### 2.5 Skill等级

```
Skill等级定义：
├─ L1: 能用AI
│     └─ 基础Prompt调用，结果一般
│
├─ L2: 会调优
│     └─ 会调整Prompt参数，结果较好
│
├─ L3: 有模板
│     └─ 有自己的Prompt模板库
│
└─ L4: 有Workflow
    └─ 有完整任务拆解+验证+迭代流程
```

### 2.6 验收标准Skill

```
验收标准改造：
├─ 平台评价体系完全开源
├─ 所有评价标准都是Skill
└─ 发起人可选择或自定义
```

#### 2.6.1 验收标准Skill类型

```typescript
interface ReviewStandardSkill {
  // 基础信息
  id: string
  name: string              // Skill名称
  author: User             // 作者
  type: 'official' | 'community' | 'custom'
  
  // 验收标准
  criteria: Criterion[]     // 验收检查项
  weights: number[]         // 各项权重
  minScore: number         // 最低通过分数
  
  // 自动化程度
  automation: 'manual' | 'semi-auto' | 'auto'
  
  // 开源信息
  license: string
  repoUrl?: string
}

interface Criterion {
  name: string             // 检查项名称
  description: string      // 说明
  automated: boolean       // 是否可自动检查
  tool?: string           // 自动化工具（如ESLint）
}
```

#### 2.6.2 官方验收标准Skill

| Skill名称 | 用途 | 检查项 |
|-----------|------|--------|
| `@ai-pm/basic-review` | 基础验收 | 功能完整性、代码质量、测试覆盖、文档完整性 |
| `@ai-pm/security-review` | 安全检查 | OWASP漏洞、依赖安全、认证授权 |
| `@ai-pm/performance-review` | 性能评估 | 响应时间、并发能力、资源占用 |
| `@ai-pm/code-style-review` | 代码规范 | PEP8、ESLint、命名规范 |

#### 2.6.3 参与者评分Skill

```typescript
interface ParticipantScoreSkill {
  // 评分维度
  dimensions: {
    completionRate: number   // 完成率权重
    qualityScore: number    // 质量分权重
    responseTime: number    // 响应时间权重
    collaboration: number   // 协作分权重
  }
  
  // 评价来源
  sources: ['task_history', 'peer_review', 'initiator_feedback']
}
```

#### 2.6.4 社区贡献验收标准

```
验收标准市场：
├─ 平台官方（经过严格审核）
│  ├─ @ai-pm/basic-review
│  ├─ @ai-pm/security-review
│  └─ @ai-pm/performance-review
│
└─ 社区贡献（开放提交）
   ├─ @username/python-api-standard
   ├─ @username/react-component-standard
   ├─ @username/go-microservice-standard
   └─ ...

开源地址：github.com/ai-projects-management/review-standards
```

---

## 三、参与者管理

### 3.1 参与者角色

**参与者定义**：使用Skill完成项目任务的协作者

**参与者职责**：
| 职责 | 说明 |
|------|------|
| **创建Skill** | 把经验封装为Skill |
| **完成任务** | 用自己的工具+Skill完成交付 |
| **分享Skill** | 分享到社区供他人复用 |
| **获取收益** | 验收通过后获得分成 |

### 3.2 个人档案

```
档案展示:
├─ 专长标签
├─ Skill等级 (L1-L4)
├─ 我的Skill列表
├─ 系统评分
└─ 历史项目
```

### 3.3 系统评分

```
评分维度:
├─ 完成率 = 完成任务数 / 承接任务数
├─ 质量分 = 平均验收评分 (5分制)
├─ 响应分 = 平均响应时间评分
└─ 协作分 = 同行/发起人评价

系统评分 = 完成率(40%) + 质量分(40%) + 响应分(10%) + 协作分(10%)
```

---

## 四、项目发布与管理

### 4.1 发布项目

```yaml
项目:
  title: 项目名称
  description: 项目描述
  mode: [社区/企业]
  total_budget: 10000

  # 环节拆解
  milestones:
    - name: 环节1名称
      description: 环节描述
      budget: 3000
      skills: [Python, React]  # 需要的专长
      quality_requirements:   # 质量要求
        min_score: 4.0       # 最低质量评分
        tests_required: true # 需要单元测试
        review_required: true # 需要代码审查
```

### 4.2 任务认领

```
任务认领流程：
    发起人发布任务
          │
          ▼
    参与者查看任务大厅
          │
          ▼
    参与者查看任务详情
          │
          ├── 评估验收标准
          ├── 确认交付物
          └── 决定是否认领
          │
          ▼
    确认认领 → 开始交付
```

### 4.3 交付流程

```
参与者交付流程：
┌─────────────────────────────────────────────────────────────────────────────┐
│                      参与者交付流程                                     │
│                                                                             │
│  1. 从平台/CLI拉取任务                                               │
│      │                                                                     │
│      ▼                                                                     │
│  2. 在AI工具中加载Skill（自己的/社区的）                            │
│      │                                                                     │
│      ▼                                                                     │
│  3. 用Skill完成交付                                                   │
│      │                                                                     │
│      ▼                                                                     │
│  4. 提交GitHub PR                                                     │
│      │                                                                     │
│      ▼                                                                     │
│  5. 平台标记任务已提交                                               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 五、发起人权限设计

### 5.1 权限概述

**核心原则**：付费者拥有知情权和验收权

```
发起人权限：
├─ 执行中可见：
│  ├─ 参与者使用的Skill（名称和作者）
│  └─ 任务进度
│
├─ 完成后可见：
│  ├─ GitHub PR/仓库链接
│  ├─ 交付物清单
│  └─ 质量验收评分
│
└─ 验收权限：
   ├─ 通过 → 确认付款
   ├─ 拒绝 → 需修改/重新做
   └─ 争议 → 平台仲裁
```

### 5.2 验收权限

**发起人验收标准**：
| 检查项 | 权重 | 说明 |
|--------|------|------|
| 功能完整性 | 40% | 需求功能是否完整实现 |
| 代码质量 | 30% | 可读性、规范性、错误处理 |
| 测试覆盖 | 20% | 单元测试覆盖率 |
| 文档质量 | 10% | 文档完整性 |

**验收操作**：
| 操作 | 条件 | 结果 |
|------|------|------|
| 通过 | 评分≥4.0 | 支付分成 |
| 拒绝 | 评分<4.0 | 需修改后重交 |
| 争议 | 双方分歧 | 平台仲裁 |

---

## 六、分成与结算机制

### 6.1 分成模式：阶段付费

**核心原则**：验收后立即到账，按贡献比例分配

```
分成流程：
┌─────────────────────────────────────────────────────────────────────────────┐
│                           阶段付费流程                                │
│                                                                             │
│  项目总预算                                                           │
│      │                                                                     │
│      ▼                                                                     │
│  拆分为N个环节                                                       │
│      │                                                                     │
│      ▼                                                                     │
│  参与者认领环节                                                      │
│      │                                                                     │
│      ▼                                                                     │
│  参与者完成交付 → 提交GitHub PR                                      │
│      │                                                                     │
│      ▼                                                                     │
│  发起人验收 ⭐                                                      │
│      │                                                                     │
│      ├── 验收通过 → 立即结算（验收后秒到账）                          │
│      │                                                                     │
│      └── 验收拒绝 → 需修改后重交                                      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 分成计算

**分成公式**：
```
参与者分成 = 环节预算 × 贡献比例
```

### 6.3 结算规则

**结算时间**：
| 场景 | 结算时间 |
|------|----------|
| 验收通过 | 立即到账（秒级） |
| 验收拒绝 | 修改后重新提交 |

**结算方式**：
| 模式 | 结算方式 |
|------|----------|
| 社区模式 | 现金（支付宝/微信） |
| 企业模式 | 积分 |

---

## 七、备份机制

### 7.1 备用参与者

**指定备用**：
```yaml
backup_participants:
  - user_id: user_002
    name: 王五
    skills: [React, TypeScript]
    state: online
```

### 7.2 任务放弃流程

| 放弃原因 | 影响 | 处理 |
|----------|------|------|
| 任务超出能力 | 信誉分-1 | 重新开放认领 |
| 个人原因 | 无惩罚 | 重新开放认领 |
| 恶意放弃 | 信誉分-3 | 限制7天 |

---

## 八、开发计划

### 8.1 开发周期

| 阶段 | 内容 | 时间 |
|------|------|------|
| **MVP** | 核心功能 | 4周 |
| **v0.7** | Skill设计+场景优化 | 1周 |
| **v1.0** | 完整功能 | 2周 |

### 8.2 MVP核心功能

| 功能 | 状态 | 说明 |
|------|------|------|
| 项目发布 | ✅ | 支持社区/企业模式 |
| 任务大厅 | ✅ | 任务展示和认领 |
| 发起人验收 | ✅ | 验收标准和结算 |
| Skill管理 | ✅ | 创建、分享、复用 |
| CLI客户端 | ⏳ | 任务同步、成果提交 |

---

**文档版本**: v0.7
**更新日期**: 2026-02-18
**核心原则**：优秀的人的经验以Skill方式用于项目各环节
